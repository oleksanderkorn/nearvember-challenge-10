(this["webpackJsonpnearvember-challenge-10"]=this["webpackJsonpnearvember-challenge-10"]||[]).push([[0],{115:function(e,t){},143:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n.n(r),a=n(72),c=n(69),s=n(0),i=n(36),l=n.n(i),u=n(3),d=(n(48),n(144)),m=n(146),j=n(1),b=function(e){e.contract;var t=e.currentUser,n=e.nearConfig,r=e.wallet,o=Object(s.useState)(!0),a=Object(u.a)(o,2),c=a[0],i=a[1],l=Object(d.a)((function(){return i(!0)}),500),b=Object(u.a)(l,3)[2];return Object(s.useEffect)((function(){b()}),[b]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(m.a,{as:s.Fragment,show:c,enter:"transform transition duration-[500ms]",enterFrom:"opacity-0 rotate-[-120deg] scale-50",enterTo:"opacity-100 rotate-0 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 rotate-0 scale-100 ",leaveTo:"opacity-0 scale-95 ",children:Object(j.jsxs)("div",{className:"flex justify-between bg-gradient-to-r from-green-400 to-blue-500 mt-6 p-2 mx-auto rounded-xl shadow-md items-center",children:[Object(j.jsx)("img",{className:"h-14 w-20",src:"https://docs.near.org/img/near_logo.svg",alt:"NEAR Logo"}),Object(j.jsx)("div",{className:"text-xl ".concat(t&&t.accountId?"md:pl-60":""," font-medium text-black uppercase"),children:"Near Sear Battle"}),Object(j.jsxs)("div",{className:"flex justify-between",children:[t&&Object(j.jsx)("div",{className:"mr-8",children:Object(j.jsxs)("p",{className:"text-black-500",children:["Account ID: ",t.accountId]})}),t?Object(j.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded float-right",onClick:function(){r.signOut(),window.location.replace(window.location.origin+window.location.pathname)},children:"Logout"}):Object(j.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded float-right",onClick:function(){r.requestSignIn(n.contractName,"NEAR Sea Battle")},children:"Login"})]})]})})})},f=function(e){var t=e.isLoading;return Object(j.jsx)(j.Fragment,{children:t?Object(j.jsx)("div",{className:"my-4 mx-auto loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"}):Object(j.jsx)("div",{className:"my-4 h-12 w-12"})})},x=n(70),g=function(e){var t=e.game,n=e.index,r=e.delay,o=(e.contract,e.currentUser,e.nearConfig,e.wallet,e.onLoading,e.onGameSelected),a=Object(s.useState)(!1),c=Object(u.a)(a,2),i=c[0],l=c[1],b=Object(s.useState)(!1),f=Object(u.a)(b,2),g=f[0],h=f[1],O=Object(s.useState)(!1),p=Object(u.a)(O,2),v=p[0],w=p[1],y=Object(d.a)((function(){return l(!0)}),200*n),N=Object(u.a)(y,3)[2],k=Object(d.a)((function(){return w(!1)}),500),C=Object(u.a)(k,3)[2];return Object(s.useEffect)((function(){N()}),[N]),Object(j.jsx)(m.a,{as:s.Fragment,show:i,enter:"transform transition duration-[".concat(r,"ms]"),enterFrom:"opacity-0 rotate-[-120deg] scale-50",enterTo:"opacity-100 rotate-0 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 rotate-0 scale-100 ",leaveTo:"opacity-0 scale-95 ",children:Object(j.jsxs)("div",{onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},className:"w-full bg-gradient-to-r ".concat(g?"from-yellow-500 to-red-600":"from-yellow-400 to-red-500","  p-6 max-w-sm mx-auto rounded-xl flex-col shadow-md flex space-y-2 cursor-pointer"),children:[Object(j.jsxs)("div",{className:"text-xl font-medium text-black text-center flex items-center justify-center",children:[Object(j.jsxs)("p",{onClick:function(){return o(t)},children:[" Game #",t.id]}),Object(j.jsx)(x.CopyToClipboard,{text:t.id,onCopy:function(){w(!0),C()},children:Object(j.jsxs)("button",{className:"inline-flex justify-center ml-2 px-2 py-2 text-sm font-medium border border-transparent rounded-md hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),v&&Object(j.jsx)("span",{children:"copied"})]})})]}),Object(j.jsxs)("div",{className:"text-md font-medium text-black text flex flex-row items-center",onClick:function(){return o(t)},children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Object(j.jsx)("p",{children:t.counterpartyId?"".concat(t.ownerId," - ").concat(t.counterpartyId):"Share game id with your friend!"})]})]})})},h=function(e){var t=e.onJoinGame,n=Object(s.useState)(!1),r=Object(u.a)(n,2),o=r[0],a=r[1],c=Object(s.useState)(!1),i=Object(u.a)(c,2),l=i[0],b=i[1],f=Object(s.useState)(""),x=Object(u.a)(f,2),g=x[0],h=x[1],O=Object(d.a)((function(){return a(!0)}),150),p=Object(u.a)(O,3)[2];return Object(s.useEffect)((function(){p()}),[p]),Object(j.jsx)(m.a,{as:s.Fragment,show:o,enter:"transform transition duration-[200ms]",enterFrom:"opacity-0 rotate-[-120deg] scale-50",enterTo:"opacity-100 rotate-0 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 rotate-0 scale-100 ",leaveTo:"opacity-0 scale-95 ",children:Object(j.jsxs)("div",{className:"w-full bg-gradient-to-r ".concat(l?"from-green-300 to-blue-500":"from-green-100 to-blue-300"," p-6 mx-auto max-w-sm rounded-xl shadow-md cursor-pointer flex flex-row items-center justify-evenly"),onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(j.jsx)("input",{type:"text",className:"p-2",value:g,placeholder:"Enter game id",onChange:function(e){return h(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){return t(g)},disabled:!g,className:"inline-flex justify-center ml-2 px-2 py-2 text-sm font-medium border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})})]})})},O=function(e){var t=e.onAddGame,n=Object(s.useState)(!1),r=Object(u.a)(n,2),o=r[0],a=r[1],c=Object(s.useState)(!1),i=Object(u.a)(c,2),l=i[0],b=i[1],f=Object(d.a)((function(){return a(!0)}),100),x=Object(u.a)(f,3)[2];return Object(s.useEffect)((function(){x()}),[x]),Object(j.jsx)(m.a,{as:s.Fragment,show:o,enter:"transform transition duration-[200ms]",enterFrom:"opacity-0 rotate-[-120deg] scale-50",enterTo:"opacity-100 rotate-0 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 rotate-0 scale-100 ",leaveTo:"opacity-0 scale-95 ",children:Object(j.jsx)("button",{onClick:t,className:"w-full bg-gradient-to-r ".concat(l?"from-green-300 to-blue-500":"from-green-100 to-blue-300"," p-6 mx-auto max-w-sm rounded-xl shadow-md cursor-pointer"),onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})},p=function(e){var t=e.game,n=(e.contract,e.currentUser,e.nearConfig,e.wallet,e.onClose),r=(e.onLoading,e.onError,Object(s.useState)(!1)),o=Object(u.a)(r,2),a=o[0],c=o[1],i=Object(s.useState)("#000"),l=Object(u.a)(i,2),b=l[0],f=l[1],x=Object(d.a)((function(){return c(!0)}),100),g=Object(u.a)(x,3)[2];return Object(s.useEffect)((function(){g()}),[g]),Object(j.jsx)(m.a,{as:s.Fragment,show:a,enter:"transform transition duration-[250ms]",enterFrom:"opacity-0 rotate-[-120deg] scale-50",enterTo:"opacity-100 rotate-0 scale-100",leave:"transform duration-200 transition ease-in-out",leaveFrom:"opacity-100 rotate-0 scale-100 ",leaveTo:"opacity-0 scale-95 ",children:Object(j.jsx)("div",{className:"mw-800 bg-gradient-to-r from-indigo-300 to-indigo-500 p-6 rounded-xl flex-col shadow-md flex",children:Object(j.jsxs)("div",{className:"text-2xl flex justify-between font-medium items-center mb-4",children:[Object(j.jsx)("div",{className:"mt-2 text-2xl text-center font-medium text-black",children:t.id}),Object(j.jsx)("button",{className:"font-medium ",onClick:n,onMouseEnter:function(){return f("#ddd")},onMouseLeave:function(){return f("#000")},children:Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:b,children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})},v=function(e){var t=e.contract,n=e.currentUser,r=e.nearConfig,o=e.wallet,a=e.onLoading,c=e.onError,i=Object(s.useState)(),l=Object(u.a)(i,2),d=l[0],m=l[1],b=Object(s.useState)(!0),f=Object(u.a)(b,2),x=f[0],v=f[1],w=Object(s.useState)(),y=Object(u.a)(w,2),N=y[0],k=y[1],C=function(e){localStorage.setItem("activeGame",e.id),k(e)};return Object(s.useEffect)((function(){if(d&&d.length>0){var e=localStorage.getItem("activeGame");d.filter((function(t){return"".concat(t.id)===e})).forEach((function(e){k(e)}))}}),[d]),Object(s.useEffect)((function(){n&&n.accountId&&a&&x&&(a(!0),t.get_games({accountId:n.accountId}).then((function(e){a(!1),m(e),v(!1)}),(function(e){v(!1),a(!1),c("".concat(e&&e.kind?e.kind.ExecutionError:e))})))}),[t,a,c,n,x]),Object(j.jsxs)("div",{className:"container mx-auto flex-row",children:[!N&&Object(j.jsxs)("div",{className:"grid lg:grid-cols-4 md:grid-cols-2 xs:grid-cols-1 gap-4",children:[Object(j.jsx)(O,{onAddGame:function(){a&&(a(!0),t.create_game().then((function(){v(!0),a(!1)}),(function(e){a(!1),c("".concat(e&&e.kind?e.kind.ExecutionError:e))})))}}),Object(j.jsx)(h,{onJoinGame:function(e){a&&(a(!0),t.join_game({gameId:parseInt(e)}).then((function(){v(!0),a(!1)}),(function(e){a(!1),c("".concat(e&&e.kind?e.kind.ExecutionError:e))})))}}),d&&d.map((function(e,c){return Object(j.jsx)(g,{game:e,index:c,contract:t,currentUser:n,nearConfig:r,wallet:o,onLoading:a,onGameSelected:C},c)}))]}),N&&Object(j.jsx)("div",{className:"grid grid-cols-1",children:Object(j.jsx)(p,{game:N,contract:t,currentUser:n,nearConfig:r,wallet:o,onLoading:a,onError:c,onClose:function(){localStorage.removeItem("activeGame"),k(null)}})})]})},w=n(145);function y(e){var t=e.error,n=e.callback;function r(){n()}return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(m.a,{appear:!0,show:""!==t,as:s.Fragment,children:Object(j.jsx)(w.a,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:r,children:Object(j.jsxs)("div",{className:"min-h-screen px-4 text-center",children:[Object(j.jsx)(m.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(j.jsx)(w.a.Overlay,{className:"fixed inset-0"})}),Object(j.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200b"}),Object(j.jsx)(m.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(j.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[Object(j.jsx)(w.a.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Opps, something went wrong"}),Object(j.jsx)("div",{className:"mt-2",children:Object(j.jsx)("p",{className:"text-sm text-gray-500",children:t})}),Object(j.jsx)("div",{className:"mt-4",children:Object(j.jsx)("button",{type:"button",className:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:r,children:"Close"})})]})})]})})})})}var N=function(e){var t=e.contract,n=e.currentUser,r=e.nearConfig,o=e.wallet,a=Object(s.useState)(!1),c=Object(u.a)(a,2),i=c[0],l=c[1],d=Object(s.useState)(""),m=Object(u.a)(d,2),x=m[0],g=m[1];return Object(j.jsxs)("div",{className:"container mx-auto",children:[Object(j.jsx)(b,{contract:t,currentUser:n,nearConfig:r,wallet:o,onLoading:l}),Object(j.jsx)(y,{error:x,callback:function(){return g("")}}),Object(j.jsx)(f,{isLoading:i}),n&&n.accountId&&Object(j.jsx)(v,{contract:t,currentUser:n,nearConfig:r,wallet:o,onLoading:l,onError:g})]})},k=(n(81),n(71)),C=n.n(k),S=n(28);function E(){return(E=Object(c.a)(o.a.mark((function e(){var t,n,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C()("production"),e.next=3,S.connect(Object(a.a)({deps:{keyStore:new S.keyStores.BrowserLocalStorageKeyStore}},t));case 3:if(n=e.sent,!(r=new S.WalletConnection(n)).getAccountId()){e.next=11;break}return e.t0=r.getAccountId(),e.next=9,r.account().state();case 9:e.t1=e.sent.amount,c={accountId:e.t0,balance:e.t1};case 11:return e.next=13,new S.Contract(r.account(),t.contractName,{viewMethods:["get_games","get_game"],changeMethods:["create_game","join_game"],sender:r.getAccountId()});case 13:return s=e.sent,e.abrupt("return",{contract:s,currentUser:c,nearConfig:t,walletConnection:r});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return E.apply(this,arguments)}().then((function(e){var t=e.contract,n=e.currentUser,r=e.nearConfig,o=e.walletConnection;l.a.render(Object(j.jsx)(N,{contract:t,currentUser:n,nearConfig:r,wallet:o}),document.getElementById("root"))}))},71:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"/nearvember-challenge-10",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).CONTRACT_NAME||"dev-1638312806859-29207693261039";e.exports=function(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"production":case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},81:function(e,t,n){},87:function(e,t){},97:function(e,t){}},[[143,1,2]]]);
//# sourceMappingURL=main.463bfe10.chunk.js.map